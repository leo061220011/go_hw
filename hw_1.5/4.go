// Задача 4:
// Напишите программу, которая запрашивает у пользователя ввод строки-формулы, а выводит сообщение о правильности написания круглых скобок, например:
// Пример 1
// строка на вход: (1+1)*(2+2)
// вывод: Скобки расставлены верно, 2 открывающиеся, 2 закрывающиеся

// Пример 2
// Строка на вход: ((1+1) + (2+2) ))
// вывод: Скобки расставлены неправильно, 3 открывающиеся, 4 закрывающиеся
package main

import (
	"bufio"
	"fmt"
	"os"
)

func main() {

	fmt.Println("Введите формулу: ")
	var stroca string
	stroca, _ = bufio.NewReader(os.Stdin).ReadString('\n')
	balance := 0    // Текущий баланс скобок
	totalOpen := 0  // Общее количество открывающих скобок
	totalClose := 0 // Общее количество закрывающих скобок
	correct := true // Флаг корректности расстановки

	// Перебираем все символы строки по одному
	for _, char := range stroca {
		switch char {
		case '(':
			balance++
			totalOpen++
		case ')':
			balance--
			totalClose++

			// Проверяем отрицательный баланс (закрывающих больше, чем открывающих)
			if balance < 0 {
				correct = false
			}
		}
	}

	// Проверяем финальный баланс
	if balance != 0 {
		correct = false
	}

	// Формируем результат
	result := "Скобки расставлены неправильно"
	if correct {
		result = "Скобки расставлены верно"
	}

	fmt.Printf("%s, %d открывающиеся, %d закрывающиеся\n", result, totalOpen, totalClose)

}
